<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS-анимации</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script defer src="../scripts.js"></script>
</head>

<body>
    <div class="contents">
        <h2><a href="#anima">CSS-анимации</a></h2>
        <ul>
            <li><a href="#enter">CSS-переходы</a></li>
            <li><a href="#transition-property">transition-property</a></li>
            <li><a href="#transition-duration">transition-duration</a></li>
            <li><a href="#transition-delay">transition-delay</a></li>
            <li><a href="#transition-timing-function">transition-timing-function</a></li>
            <li><a href="#transitionend">Событие: «transitionend»</a></li>
            <li><a href="#basic">Ключевые кадры</a></li>
            <li><a href="#total">Итого</a></li>
            <li><a href="#tasks">Задачи</a></li>
        </ul>
    </div>
    <div class="topic" id="anima">
        <h2><a href="https://learn.javascript.ru/css-animations">CSS-анимации</a></h2>
        <p>CSS позволяет создавать анимации без использования javascript, но управляя CSS-анимациями можно создавать ещё
            более сложные анимации.</p>
    </div>
    <div class="topic" id="enter">
        <h3>CSS-переходы</h3>
        <p>Это свойство которое говорит браузеру как менять анимацию какого-либо объекта, например:</p>
        <pre><code class="language-html">
&lt;button id="color">Нажми меня&lt;/button&gt;

&lt;style&gt;
  #color {
    transition-property: background-color, font-size;
    transition-duration: 10s;
  }
&lt;/style&gt;

&lt;script&gt;
  color.onclick = function() {
    this.style.backgroundColor = 'red';
    this.style.fontSize = '35px'
  };
&lt;/script&gt;            
        </code></pre>
        <button id="color">Нажми меня</button>

        <style>
            #color {
                transition-property: background-color, font-size;
                transition-duration: 10s;
            }
        </style>

        <script>
            color.onclick = function () {
                this.style.backgroundColor = 'red';
                this.style.fontSize = '35px'
            };
        </script>
        <p>Как видно из 4 свойств было задействовано 2:</p>
        <ul>
            <li><code>transition-property</code> – свойство перехода</li>
            <li><code>transition-duration</code> – продолжительность перехода</li>
            <li><code>transition-timing-function</code> – временная функция перехода</li>
            <li><code>transition-delay</code> – задержка начала перехода </li>
        </ul>
        <p>Есть также общее свойство transition, которое позволяет задать их одновременно в последовательности: property
            duration timing-function delay, а также анимировать несколько свойств одновременно. Здесь анимируются два
            свойства color и font-size одновременно:</p>
        <pre><code class="language-html">
&lt;button id="growing">Нажми меня&lt;/button&gt;

&lt;style&gt;
#growing {
  transition: font-size 3s, color 2s;
}
&lt;/style&gt;

&lt;script&gt;
growing.onclick = function() {
  this.style.fontSize = '36px';
  this.style.color = 'red';
};
&lt;/script&gt;                
            </code></pre>
        <button id="growing">Нажми меня</button>

        <style>
            #growing {
                transition: font-size 3s, color 2s;
            }
        </style>

        <script>
            growing.onclick = function () {
                this.style.fontSize = '36px';
                this.style.color = 'red';
            };
        </script>
    </div>
    <div class="topic" id="transition-property">
        <h3><code>transition-property</code></h3>
        <p>В transition-property записывается список свойств, изменения которых необходимо анимировать, например:
            <code>left</code>,
            <code>margin-left</code>, <code>height</code>, <code>color</code>.

            <br>Анимировать можно не все свойства, <a
                href="https://www.w3.org/TR/css-transitions-1/#transition-property-property">но многие</a> из них.
            Значение свойства all означает «анимируй все
            свойства».
        </p>
    </div>
    <div class="topic" id="transition-duration">
        <h3>transition-duration</h3>
        <p>Задаёт время анимации в <code>s</code> или <code>ms</code>.</p>
    </div>
    <div class="topic" id="transition-delay">
        <h3>transition-delay</h3>
        <p>Как следует из названия - определяет задержку перед проигрыванием анимации, если задержка минусовая, а
            длительность <code>transition-duration</code> плюсовая, то анимации начнётся с какого-то момент разности
            этих чисел.</p>
        <p>В топике даётся анимация проигрывания чисел с "рандомом" её сдвига.</p>
    </div>
    <div class="topic" id="transition-timing-function">
        <h3>transition-timing-function</h3>
        <p>Может принимать два значения или кривая безье или количество шагов.</p>
        <div id="bezier">
            <h3>Кривая Безье</h3>
            <p>Временная функция может быть задана, как кривая Безье с 4 контрольными точками, удовлетворяющими
                условиям:</p>
            <ol>
                <li>Первая контрольная точка: (0,0).</li>
                <li>Последняя контрольная точка: (1,1).</li>
                <li>Для промежуточных точек значение x должно быть 0..1, значение y может принимать любое значение.
                </li>
            </ol>
            <p>Синтаксис для кривых Безье в CSS: <code>cubic-bezier(x2, y2, x3, y3)</code>. Нам необходимо задать только
                вторую и
                третью контрольные точки, потому что первая зафиксирована со значением (0,0) и четвёртая – (1,1). Самым
                простым случаем будет прямая <code>cubic-bezier(0, 0, 1, 1)</code>. Для более сложных случаем выбираются
                другие цифры.
                В топике есть примеры анимации поезда.
            </p>
            <p>Есть несколько встроенных обозначений кривых Безье: <code>linear</code>, <code>ease</code>,
                <code>ease-in</code>, <code>ease-out</code> и <code>ease-in-out</code> которые
                можно использовать без координат без названия:
            </p>
            <pre><code class="language-css">
.train {
  left: 0;
  transition: left 5s ease-out;
  /* transition: left 5s cubic-bezier(0, .5, .5, 1); */
}                    
                </code></pre>
            <p>Далее по этой теме даётся дополнительный материал, как сделать анимации на основе кривых безье.</p>
        </div>
        <div id="steps">
            <h3>Шаги</h3>
            <p>Временная функция <code>steps(количество шагов[, start/end])</code> позволяет разделить анимацию на шаги.
                Также существуют также некоторые заранее определённые сокращения для <code>steps(...)</code>:

            </p>
            <ul>
                <li><code>step-start</code> – то же самое, что <code>steps(1, start)</code>. Оно означает, что анимация
                    начнётся сразу и
                    произойдёт в один шаг. Таким образом она начнётся и завершится сразу, как будто и нет никакой
                    анимации.</li>
                <li><code>step-end</code> – то же самое, что <code>steps(1, end)</code>: выполнит анимацию за один шаг в
                    конце
                    transition-duration. </li>
            </ul>
        </div>
    </div>
    <div class="topic" id="transitionend">
        <h3>Событие: «transitionend»</h3>
        <p>Когда завершается анимация, срабатывает событие transitionend.

            Оно широко используется для выполнения действий после завершения анимации, а также для создания
            последовательности анимаций. Далее идёт пример с корабликом, код там примерно такой:</p>
        <pre><code class="language-js">
boat.onclick = function() {
  //...
  let times = 1;

  function go() {
    if (times % 2) {
      // плыть вправо
      boat.classList.remove('back');
      boat.style.marginLeft = 100 * times + 200 + 'px';
    } else {
      // плыть влево
      boat.classList.add('back');
      boat.style.marginLeft = 100 * times - 200 + 'px';
    }

  }

  go();

  boat.addEventListener('transitionend', function() {
    times++;
    go();
  });
};
            </code></pre>
        <p>Объект события transitionend содержит ряд полезных свойств:</p>
        <ul>
            <li><code>event.propertyName</code>
                <br>Имя свойства, анимация которого завершилась. Может быть полезным, если мы анимируем несколько
                свойств.
            </li>
            <li><code>event.elapsedTime</code>
                <br>Время (в секундах), которое заняла анимация, без учёта transition-delay.
            </li>
        </ul>
    </div>
    <div class="topic" id="basic">
        <h3>Ключевые кадры</h3>
        <p>Мы можем объединить несколько простых анимаций вместе, используя CSS-правило @keyframes. Оно определяет «имя»
            анимации и правила: что, когда и где анимировать. После этого можно использовать свойство animation, чтобы
            назначить анимацию на элемент и определить её дополнительные параметры. Например:
        </p>
        <pre><code class="language-css">
&lt;div class="progress">&lt;/div>

&lt;style>
  @keyframes go-left-right {        /* объявляем имя анимации: "go-left-right" */
    from { left: 0px; }             /* от: left: 0px */
    to { left: calc(100% - 50px); } /* до: left: 100%-50px */
  }

  .progress {
    animation: go-left-right 3s infinite alternate;
    /* применить анимацию "go-left-right" на элементе
       продолжительностью 3 секунды
       количество раз: бесконечно (infinite)
       менять направление анимации каждый раз (alternate)
    */

    position: relative;
    border: 2px solid green;
    width: 50px;
    height: 20px;
    background: lime;
  }
&lt;/style>

        </code></pre>
        <div class="progress"></div>

        <style>
            @keyframes go-left-right {

                /* объявляем имя анимации: "go-left-right" */
                from {
                    left: 0px;
                }

                /* от: left: 0px */
                to {
                    left: calc(100% - 50px);
                }

                /* до: left: 100%-50px */
            }

            .progress {
                animation: go-left-right 3s infinite alternate;
                /* применить анимацию "go-left-right" на элементе
       продолжительностью 3 секунды
       количество раз: бесконечно (infinite)
       менять направление анимации каждый раз (alternate)
    */

                position: relative;
                border: 2px solid green;
                width: 50px;
                height: 20px;
                background: lime;
            }
        </style>

    </div>
    <div class="topic" id="total">
        <h3>Итого</h3>
        <p>Css-анимации позволяют плавно или не очень менять одно или несколько свойств элемента. Css-анимации хорошо
            решают большинство задач по анимации.</p>
        <p>СДостоинства и недостатки Css-анимаций в сравнении с js-анимациями</p>
        <table>
            <thead>
                <tr>
                    <th>Достоинства</th>
                    <th>Недостатки</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <ul>
                            <li>Простые анимации делаются просто.</li>
                            <li>Быстрые и не создают нагрузку на CPU.</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li>JavaScript-анимации более гибкие. В них может присутствовать любая анимационная логика,
                                как например «взорвать» элемент.</li>
                            <li>Можно изменять не только свойства. Мы можем создавать новые элементы с помощью
                                JavaScript для анимации. </li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>Большинство анимаций может быть реализовано с использованием CSS, как описано в этой главе. А событие
            <code>transitionend</code> позволяет запускать JavaScript после анимации, поэтому CSS-анимации прекрасно
            интегрируются с кодом.
        </p>
    </div>
    <div class="topic" id="tasks">
        <h3>Задачи</h3>
        <div id="task1">
            <h4>Задача 1 выполнена</h4>
            <iframe src="css-animations/css-animationsTask1.html" frameborder="0" height="300px" width="500px"></iframe>
            <p>Не реализовано: автоматическое получения координа и умножение на 10, криво реализовано сообщение - показ
                один раз через флаг.</p>
        </div>
        <div id="task2">
            <h4>Задача 2 решена</h4>
            <p><a href="css-animations/css-animationsTask2.html">Решение</a> по типу задачи 1. С теми же замечаниями.</p>
        </div>
    </div>


</body>

</html>