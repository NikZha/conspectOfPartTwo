<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Основы событий мыши</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</head>

<body>
    <div class="contents">
        <h2><a href="#basic">Основы событий мыши</a></h2>
        <ul>
            <li><a href="#types">Типы событий мыши</a></li>
            <li><a href="#order">Порядок событий</a></li>
            <li><a href="#buttons">Кнопки мыши</a></li>
            <li><a href="#mods">Модификаторы: shift, alt, ctrl и meta</a></li>
            <li><a href="#coords">Координаты: clientX/Y, pageX/Y</a></li>
            <li><a href="#off">Отключаем выделение</a></li>
            <li><a href="#total">Итого</a></li>
            <li><a href="#tasks">Задача</a></li>
        </ul>
    </div>
    <div class="topic" id="basic">
        <h2><a href="https://learn.javascript.ru/mouse-events-basics">Основы событий мыши</a></h2>
        <p>В этой подглаве мы более детально рассмотрим события мыши и их свойства.</p>

        <p>Сразу заметим: эти события бывают не только из-за мыши, но и эмулируются на других устройствах, в частности,
            на мобильных, для совместимости. </p>
    </div>
    <div class="topic" id="types">
        <h3>Типы событий мыши</h3>
        <ul>
            <li><code>mousedown/mouseup</code>
                <br>Кнопка мыши нажата/отпущена над элементом.
            </li>
            <li><code>mouseover/mouseout</code>
                <br>Курсор мыши появляется над элементом и уходит с него.
            </li>
            <li><code>mousemove</code>
                <br>Каждое движение мыши над элементом генерирует это событие.
            </li>
            <li><code>click</code>
                <br>Вызывается при mousedown , а затем mouseup над одним и тем же элементом, если использовалась левая
                кнопка мыши.
            </li>
            <li><code>dblclick</code>
                <br>Вызывается двойным кликом на элементе.
            </li>
            <li><code>contextmenu</code>
                <br>Вызывается при попытке открытия контекстного меню, как правило, нажатием правой кнопки мыши. Но,
                заметим, это не совсем событие мыши, оно может вызываться и специальной клавишей клавиатуры.
            </li>
        </ul>
    </div>
    <div class="topic" id="order">
        <h3>Порядок событий</h3>
        <p> Обработчики событий вызываются в следующем порядке: mousedown → mouseup → click. Потом обрабатывается
            dblclick</p>
    </div>
    <div class="topic" id="buttons">
        <h3>Кнопки мыши</h3>
        <p>Значения кнопок мыши:</p>
        <table>
            <thead>
                <tr>
                    <th>Состояние кнопки </th>
                    <th>event.button</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Левая кнопка (основная) </td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>Средняя кнопка (вспомогательная) </td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>Правая кнопка (вторичная) </td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>Кнопка X1 (назад) </td>
                    <td>3</td>
                </tr>
                <tr>
                    <td>Кнопка X2 (вперёд) </td>
                    <td>4</td>
                </tr>
            </tbody>
        </table>
        <p>Сенсорные устройства также генерируют аналогичные события, когда кто-то нажимает на них.</p>
        <p>Также есть свойство event.buttons, в котором все нажатые в данный момент кнопки представлены в виде целого
            числа, по одному биту на кнопку. На практике это свойство используется очень редко, вы можете найти
            подробную информацию по адресу <a
                href="https://developer.mozilla.org/ru/docs/Web/api/MouseEvent/buttons">MDN</a>, если вам это
            когда-нибудь понадобится.</p>
        <blockquote>
            <h4>Устаревшее свойство event.which</h4>
            <p>В старом коде вы можете встретить event.which свойство – это старый нестандартный способ получения кнопки
                с возможными значениями:</p>
            <ul>
                <li>event.which == 1 – левая кнопка,</li>
                <li>event.which == 2 – средняя кнопка,</li>
                <li>event.which == 3 – правая кнопка.</li>
            </ul>
            <p>
                На данный момент event.which устарел, нам не следует его использовать.</p>


        </blockquote>
    </div>
    <div class="topic" id="mods">
        <h3>Модификаторы: shift, alt, ctrl и meta</h3>
        <p>Свойства события:</p>
        <ul>
            <li>shiftKey: Shift</li>
            <li>altKey: Alt (или Opt для Mac)</li>
            <li>ctrlKey: Ctrl</li>
            <li>metaKey: Cmd для Mac </li>
        </ul>
        <p>
            Они равны true, если во время события была нажата соответствующая клавиша.

            Например, кнопка внизу работает только при комбинации Alt+Shift+клик:</p>
        <pre>
                <code class="language-js">
&lt;button id="button">Нажми Alt+Shift+Click на мне!&lt;/button>

&lt;script>
  button.onclick = function(event) {
    if (event.altKey && event.shiftKey) {
      alert('Ура!');
    }
  };
&lt;/script>                    
                </code>
            </pre>
        <div>
            <button id="button">Нажми Alt+Shift+Click на мне!</button>

            <script>
                button.onclick = function (event) {
                    if (event.altKey && event.shiftKey) {
                        alert('Ура!');
                    }
                };
            </script>
        </div>
        <p>То есть как видно из кода повешена функция на onclick и внутри функции проверяются нажатия клавиш.</p>
    </div>
    <div class="topic" id="coords">
        <h3>Координаты: clientX/Y, pageX/Y</h3>
        <p>Все события мыши имеют координаты двух видов:
        <ol>
            <li>Относительно окна: clientX и clientY.</li>
            <li>Относительно документа: pageX и pageY.</li>
        </ol>
        В конспекте есть <a href="../1Документ/coordinates.html">глава о координатах</a> где это подробно
        рассматривается.
        </p>
        <input onmousemove="this.value=event.clientX+':'+event.clientY" value="Наведи на меня мышь">
        <pre>
            <code class="language-js">
&lt;input onmousemove="this.value=event.clientX+':'+event.clientY" value="Наведи на меня мышь">                
            </code>
        </pre>

    </div>
    <div class="topic" id="off">
        <h3>Отключаем выделение</h3>
        <p>В целом вешать событие на dblclick не является хорошей идеей.</p>
        <br><span ondblclick="alert('dblclick')">Сделайте двойной клик на мне</span>
        <pre><code class="language-js">
&lt;span ondblclick="alert('dblclick')">Сделайте двойной клик на мне&lt;/span>        
    </code></pre>
        <p>Так как это событие выключает выделение объекта. Что является неудобным с точки зрения пользователя. Но в
            некоторых случаях это может являтся желательным поведением.</p>
        <p>
            До...
            <b ondblclick="alert('Клик!')" onmousedown="return false">
                Сделайте двойной клик на мне
            </b>
            ...После
        </p>
        <pre><code class="language-js">
До...
&lt;b ondblclick="alert('Клик!')" onmousedown="return false">
  Сделайте двойной клик на мне
&lt;/b>
...После    
</code></pre>
        <p>Достикается это как становится понятно <code>onmousedown="return false"</code>. Но выделить текст все равно
            можно, выделять нужно до этого текста или в консоли разработчика.</p>
        <blockquote>
            <h4>Предотвращение копирования</h4>
            <p>Тоже самое касается и запрещение копирования путём установки свойства элемента:</p>
            <pre><code class="language-js">
oncopy="alert('Копирование запрещено!');return false"        
    </code></pre>
        </blockquote>
    </div>
    <div class="topic" id="total">
        <h3>Итого</h3>
        События мыши имеют следующие свойства:
        <ul>
            <li>Кнопка: button.</li>

            <li>Клавиши-модификаторы (true если нажаты): altKey, ctrlKey, shiftKey и metaKey (Mac).</li>

            <li>Если вы планируете обработать Ctrl, то не забудьте, что пользователи Mac обычно используют Cmd, поэтому
                лучше проверить if (e.metaKey || e.ctrlKey).</li>
            <li>Координаты относительно окна: clientX/clientY.</li>

            <li>Координаты относительно документа: pageX/pageY.</li>
        </ul>

       <p> Действие по умолчанию события mousedown – начало выделения, если в интерфейсе оно скорее мешает, его можно
        отменить.</p>

        <p>В следующей главе мы поговорим о событиях, которые возникают при передвижении мыши, и об отслеживании смены
        элементов под указателем.</p>
    </div>






</body>

</html>