<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пользовательские элементы (Custom Elements)</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script defer src="../scripts.js"></script>
</head>

<body>

    <div class="contents">
        <h2><a href="#custom">Пользовательские элементы (Custom Elements)</a></h2>
        <ul>
            <li><a href="#exampl">Пример: «time-formatted»</a></li>
            <li><a href="#watch">Наблюдение за атрибутами</a></li>
            <li><a href="#order">Порядок рендеринга</a></li>
            <li><a href="#modif">Модифицированные встроенные элементы</a></li>
            <li><a href="#links">Ссылки</a></li>
            <li><a href="#total">Итого</a></li>
            <li><a href="#tasks">Задача</a></li>
        </ul>
    </div>
    <div class="topic" id="custom">
        <h2><a href="https://learn.javascript.ru/custom-elements">Пользовательские элементы (Custom Elements)</a></h2>
        <p>В html/js можно создавать свои теги прописывая их свойства, которых существует два вида:</p>
        <ul>
            <li><strong>Автономные пользовательские элементы</strong> – «полностью новые» элементы, расширяющие
                абстрактный класс HTMLElement.</li>
            <li><strong>Пользовательские встроенные элементы</strong> – элементы, расширяющие встроенные, например
                кнопку HTMLButtonElement и т.п. </li>
        </ul>
        <p>Сначала будем рассматривать автономные пользовательские элементы. Создание происходит путём создания
            пользовательского класса:</p>
        <pre><code class="language-js">
class MyElement extends HTMLElement {
  constructor() {
    super();
    // элемент создан
  }

  connectedCallback() {
    // браузер вызывает этот метод при добавлении элемента в документ
    // (может вызываться много раз, если элемент многократно добавляется/удаляется)
  }

  disconnectedCallback() {
    // браузер вызывает этот метод при удалении элемента из документа
    // (может вызываться много раз, если элемент многократно добавляется/удаляется)
  }

  static get observedAttributes() {
    return [/* массив имён атрибутов для отслеживания их изменений */];
  }

  attributeChangedCallback(name, oldValue, newValue) {
    // вызывается при изменении одного из перечисленных выше атрибутов
  }

  adoptedCallback() {
    // вызывается, когда элемент перемещается в новый документ
    // (происходит в document.adoptNode, используется очень редко)
  }

  // у элемента могут быть ещё другие методы и свойства
}                
            </code></pre>
        <p>После этого нам нужно зарегистрировать элемент:</p>
        <pre><code class="language-js">
// сообщим браузеру, что <my-element> обслуживается нашим новым классом
customElements.define("my-element", MyElement);                
            </code></pre>
        <p>Теперь для любых HTML-элементов с тегом &lt;my-element> создаётся экземпляр MyElement и вызываются
            вышеупомянутые
            методы. Также мы можем использовать document.createElement('my-element') в JavaScript.</p>
        <blockquote>
            <h4>Имя пользовательского элемента должно содержать дефис -</h4>
            <p>Это гарантирует отсуствие конфликтов.</p>
        </blockquote>
    </div>
</body>

</html>